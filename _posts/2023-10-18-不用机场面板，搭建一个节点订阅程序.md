---
title: ä¸ç”¨æœºåœºé¢æ¿ï¼Œæ­å»ºä¸€ä¸ªèŠ‚ç‚¹è®¢é˜…ç¨‹åº
date: 2023-10-18T18:57:42+08:00
lastmod: 2023-08-18T19:57:42+08:00
tags: 
    - ğŸ˜Linux
    - ğŸ‹Docker
author: yuniee
summary: ä¸ªäººä½¿ç”¨ï¼Œä¸æƒ³ä½¿ç”¨æœºåœºé¢æ¿ï¼Œä½¿èŠ‚ç‚¹å˜æˆè®¢é˜…é“¾æ¥ï¼Œæ›´æ–°è®¢é˜…ï¼Œå¤šè®¾å¤‡æ‰¶å¢™æ›´æ–¹ä¾¿ã€‚
image: https://s2.loli.net/2023/10/18/hfNTHCElwZLnMFv.jpg
---

# ä¸ç”¨æœºåœºé¢æ¿ï¼Œæ­å»ºä¸€ä¸ªèŠ‚ç‚¹è®¢é˜…ç¨‹åº

## ğŸ¦¦å‰è¨€

**æœ¬æ¬¡ä»‹ç»çš„é¡¹ç›®æ˜¯æ¥è‡ªNodeseekè®ºå›çš„ä¸€ä¸ªè€å“¥å†™çš„ï¼Œä¸ºäº†æ›´æ–¹ä¾¿çš„ç®¡ç†èŠ‚ç‚¹ï¼Œä½†å› ä¸ºæ­¤ç±»è¯é¢˜å‘åœ¨å†…æ¿å¾ˆå¿«å°±è¢«è®¾ä¸ºç§æœ‰äº†ï¼Œå·²ç»å¿˜è®°æ˜¯å“ªä¸ªè€å“¥å†™çš„äº†ğŸ˜¥ï¼Œä½†æ˜¯è°¢è°¢å¤§ä½¬ã€‚**

å¾ˆå¤šäººéƒ½è§‰å¾—ä½¿ç”¨æœºåœºé¢æ¿å¾ˆéº»çƒ¦ï¼Œå¹¶ä¸”ä¸ªäººä½¿ç”¨å¾ˆå¤šæ—¶å€™æ²¡å¿…è¦ï¼Œæ‰€ä»¥æ€»æƒ³æ‰¾ä¸€ä¸ªåªéœ€è¦å°†èŠ‚ç‚¹é“¾æ¥æ”¾å…¥ä¸€ä¸ªtxtæ–‡æ¡£ä¾¿å¯ä»¥å‡­å€Ÿè®¢é˜…é“¾æ¥åœ¨å„ç«¯æ›´æ–°æ‰€æœ‰èŠ‚ç‚¹çš„æ–¹å¼ã€‚æ‰€ä»¥è¿™æ¬¡ä»‹ç»çš„ç¨‹åºå¯èƒ½é€‚åˆè¿™ç§è¦æ±‚ã€‚
<InArticleAdsense
    data-ad-client="ca-pub-5818850638223663"
    data-ad-slot="1327307385">
</InArticleAdsense>
## ğŸ¦›å¼€å§‹æ­å»º

### ğŸ¤ªå‡†å¤‡å·¥ä½œ

æ›´æ–°ç³»ç»Ÿï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯Debian11ç³»ç»Ÿï¼ˆUbuntuåŒç†ï¼‰

```bash
apt update -y && apt upgrade -y
```

å®‰è£…å¿…è¦å·¥å…·

```bash
apt install wget curl sudo vim git  -y
```

### ğŸ‹å®‰è£…dockerï¼Œdocker-composeå¹¶é…ç½®

1. ä¸‹è½½docker   

```bash
wget -qO- get.docker.com | bash
```

2. è®¾ç½®dockerå¼€æœºè‡ªå¯

```bash
systemctl enable docker
```

3. é‡å¯docker

```bash
systemctl restart docker
```

4. å®‰è£…docker-compose

```bash
sudo curl -L "https://github.com/docker/compose/releases/download/1.29.2/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
```

5. docker-composeèµ‹æƒ

```bash
sudo chmod +x /usr/local/bin/docker-compose
```

### ğŸˆâ€â¬›é¡¹ç›®éƒ¨ç½²

#### ğŸdocker runéƒ¨ç½²

1.å¯ä»¥ä½¿ç”¨docker runéƒ¨ç½²ï¼Œåªéœ€è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼Œè¿™ä¹Ÿæ˜¯è®ºå›è€å“¥æä¾›çš„ï¼š

```bash
docker run -d --restart=always -p 10015:10015  -e  "TOKEN=dmit" -v /opt/dingyue.txt:/dingyue brownbearye/brownbearye:latest
```

å…¶ä¸­çš„å‚æ•°è§£é‡Šå¦‚ä¸‹

**-p** 10015:10015 10015æ˜¯è®¢é˜…åœ°å€å¯¹å¤–å‘å¸ƒçš„ç«¯å£,å¯ä»¥ä¿®æ”¹ä¸ºä½ æƒ³è¦çš„ï¼Œ10015æ˜¯é»˜è®¤ç«¯å£

**-e "TOKEN=dmit"** ä¸ºæ¥å£çš„ç§˜é’¥ï¼Œåªæœ‰ç§˜é’¥æ­£ç¡®æ‰å¯ä»¥è·å–åˆ°æ¥å£è¿”å›çš„èŠ‚ç‚¹ã€‚ä½ å¯ä»¥æ”¹ä¸ºè‡ªå·±æƒ³è¦çš„ï¼Œä½†æœ€å¥½è®¾ç½®çš„å¤æ‚ä¸€äº›ï¼Œä¸ºäº†å°½å¯èƒ½ç¡®ä¿ä½ çš„è®¢é˜…å®‰å…¨ã€‚

**-v /opt/dingyue.txt:/dingyue**æ˜¯å­˜æ”¾èŠ‚ç‚¹ä¿¡æ¯çš„è®¢é˜…æ–‡ä»¶åœ¨VPSä¸Šçš„ä½ç½®ï¼Œè¿™é‡Œè¯´æ˜èŠ‚ç‚¹æ”¾åˆ°/myvpsæ–‡ä»¶å¤¹å†…æ–°å»ºçš„dingyue.txtæ–‡ä»¶ä¸­ï¼Œä»¥è‡ªèº«å®é™…ä¸ºå‡†ã€‚è¿™ä¸ªæ–‡ä»¶å†…å­˜æ”¾èŠ‚ç‚¹ä¿¡æ¯ï¼Œæ¯è¡Œä¸€ä¸ªèŠ‚ç‚¹ï¼Œè¿™é‡Œè¦æ³¨æ„ã€‚ä¹Ÿå°±æ˜¯è¯´ä¸‹ä¸ªèŠ‚ç‚¹ç²˜è´´æ—¶è¦é‡æ–°å¦èµ·ä¸€è¡Œã€‚

æ¯”å¦‚ï¼š

```bash
cd /opt
touch dingyue.txt
vim dingyue.txt
```

è¾“å…¥èŠ‚ç‚¹é“¾æ¥åè¾“å…¥`:`åŠ `wq`ä¿å­˜å¹¶é€€å‡ºå°±å¯ä»¥äº†ã€‚

éƒ¨ç½²å®Œæˆåæ ¹æ®é…ç½®ä¿®æ”¹è®¢é˜…è¿æ¥æ¥è·å–èŠ‚ç‚¹ã€‚



**è®¢é˜…è¿æ¥çš„æ ¼å¼ä¸º:** 

```bash
http://ä½ çš„ip:10015?token=dmit(æ›¿æ¢ä¸ºä½ æ›´æ”¹çš„å¯†é’¥)
```

å½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨åå‘ä»£ç†10065ç«¯å£åä½¿ç”¨åŸŸåã€‚æ ¼å¼å¦‚ä¸‹ï¼š

```bash
https://åŸŸå?token=dmit(æ›¿æ¢ä¸ºä½ æ›´æ”¹çš„å¯†é’¥)
```

åå‘ä»£ç†å¯ä»¥çœ‹è¿™é‡Œï¼š[Caddyçš„åŸºç¡€ä½¿ç”¨ï¼Œä¸‹è½½Caddyå¹¶éƒ¨ç½²åå‘ä»£ç†å’Œè‡ªåŠ¨ç­¾å‘, ç»­æœŸSSL è¯ä¹¦](https://www.yunieebk.com/2023/07/30/caddy%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8%EF%BC%8C%E4%B8%8B%E8%BD%BDcaddy%E5%B9%B6%E9%83%A8%E7%BD%B2%E5%8F%8D%E5%90%91%E4%BB%A3%E7%90%86%E5%92%8C%E8%87%AA%E5%8A%A8%E7%AD%BE%E5%8F%91-%E7%BB%AD%E6%9C%9Fssl-%E8%AF%81%E4%B9%A6/)

#### ğŸ¢docker-composeæ–‡ä»¶

å½“ç„¶ï¼Œæœ‰äººå–œæ¬¢docker-composeï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨è¿™ä¸ªé…ç½®æ–‡ä»¶ï¼š

```bash
cd /opt/dy
vim docker-compose.yml
```

è¾“å…¥ï¼š

```yaml
version: '3'
services:
  brownbearye:
    image: brownbearye/brownbearye:latest
    container_name: brownbearye_container
    restart: always
    ports:
      - "10015:10015"
    environment:
      - TOKEN=dmit
    volumes:
      - /opt/dingyue.txt:/dingyue
```

ç„¶åè¾“å…¥`:`åŠ `wq`ä¿å­˜å¹¶é€€å‡º

æœ€åè¾“å…¥:

```bash
docker-compose up -d
```
<InArticleAdsense
    data-ad-client="ca-pub-5818850638223663"
    data-ad-slot="1327307385">
</InArticleAdsense>

### ğŸ«æºç 

è¿™æ˜¯è€å“¥å½“æ—¶æä¾›çš„æºç ,ä¸€å…±æ˜¯ä¸¤ä¸ªæ–‡ä»¶ï¼š

```python
# ä½¿ç”¨å®˜æ–¹ Python è¿è¡Œæ—¶ä½œä¸ºçˆ¶é•œåƒ
FROM python:3.8-slim-buster

# è®¾ç½®å·¥ä½œç›®å½•
WORKDIR /app

# å°†å½“å‰ç›®å½•å†…å®¹å¤åˆ¶åˆ°å®¹å™¨çš„ /app ç›®å½•ä¸‹
ADD . /app

# å®‰è£… flask
RUN pip install flask

# è¿è¡Œ app.py æ—¶ï¼ŒFlask æœåŠ¡å°†ä¼šå¯åŠ¨
CMD ["python", "app.py"]
```

```python
from flask import Flask, request
import base64
import os

app = Flask(__name__)

req_token = os.environ.get('TOKEN', 'brown')

@app.route('/')
def download_file():
    token = request.args.get('token')
    if token == req_token:  # å¦‚æœç”¨æˆ·ä¼ å…¥çš„tokenå€¼ä¸è¦æ±‚çš„ä¸€è‡´
        path = '/dingyue'
        with open(path, 'rb') as file:
            file_content = file.read()
            base64_content = base64.b64encode(file_content).decode('utf-8')
            return base64_content
    else:
        return "Invalid token"


if __name__ == '__main__':
    app.run(host='0.0.0.0', port=10015)
```

## ğŸ¤ åè®°

å¦‚æœä½ è§‰å¾—è¿™æ ·æ·»åŠ èŠ‚ç‚¹ä¸æ–¹ä¾¿ï¼Œä½ å¯ä»¥è¯•è¯•alistè¿™ä¸ªå¼ºå¤§çš„åœ¨çº¿æ–‡ä»¶ç®¡ç†å·¥å…·ï¼Œåœ¨é‡Œé¢ä½ å¯ä»¥ç›´æ¥åœ¨çº¿ç¼–è¾‘txtæ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥å‚è€ƒè¿™ä¸ªï¼š[ä¸‹è½½Alistæ¥è®¿é—®è‡ªå·±ä¸‹è½½çš„æœ¬åœ°æ–‡ä»¶](https://www.yunieebk.com/2023/08/22/%E9%97%B2%E7%BD%AEvps%E5%88%A9%E7%94%A8%E8%AE%A1%E5%88%92-%E5%88%A9%E7%94%A8docker-compose%E6%90%AD%E5%BB%BA%E4%B8%80%E4%B8%AAqqflac%E9%9F%B3%E4%B9%90%E4%B8%8B%E8%BD%BD%E5%99%A8/#%F0%9F%91%BB%E4%B8%8B%E8%BD%BDalist%E6%9D%A5%E8%AE%BF%E9%97%AE%E8%87%AA%E5%B7%B1%E4%B8%8B%E8%BD%BD%E7%9A%84%E6%9C%AC%E5%9C%B0%E6%96%87%E4%BB%B6)

ä½¿ç”¨è¿™ä¸ªç¡®å®æ¯”æ­å»ºä¸€ä¸ªé¢æ¿ç®€å•å¤šäº†ï¼Œå¹¶ä¸”ä½¿ç”¨èµ·æ¥ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œå¹¶ä¸”å ç”¨èµ„æºä¹Ÿå¾ˆå°‘ã€‚
<InArticleAdsense
    data-ad-client="ca-pub-5818850638223663"
    data-ad-slot="1327307385">
</InArticleAdsense>
